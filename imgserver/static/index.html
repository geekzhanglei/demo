<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>图片上传</title>
</head>

<body>
    <!-- 方法一：form表单上传 -->
    <h1>方法一：form表单</h1>
    <form action="http://127.0.0.1:3000/upload" method="post" enctype="multipart/form-data">
        <input type="file" name="file" /> <input type="submit" value="ok" />
    </form>

    <!-- 方法二： input的file类型-->
    <h2>方法二：input带file类型</h2>
    <input accept="image/*" name="img" id="upload_file" type="file" onchange="change()">


</body>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    function change() {
        var file = document.getElementById("upload_file").files[0];
        console.log(file)
        var formdata1 = new FormData(); // 创建form对象
        formdata1.append('img', file, file.name); // 通过append向form对象添加数据,可以通过append继续添加数据
        //或formdata1.append('img',file);
        let config = {
            headers: {
                'Content-Type': 'multipart/form-data'
            }
        }; //添加请求头
        axios.post('http://127.0.0.1:3000/upload', formdata1, config).then(response => { //这里的/xapi/upimage为接口
            console.log(response.data);
        });
    }
</script>

</html>
